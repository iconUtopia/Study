<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Document</title>
</head>
<style>
  .title {
    text-align: center;
  }

  .box {
    background-color: green;
    width: 200px;
    height: 200px;
    margin: 0 auto;
  }
</style>

<body>
  <h1 class="title" id="title">测试</h1>
  <div class="box"></div>
  <input placeholder="数据改变视图" id="inputValue" />
  显示值:
  <p id="inputData"></p>
  <div
    style="width: 500px;height: 200px;margin:0 auto;border:1px solid #000;display: flex;align-items: center;justify-content: center;">
    <div style="width: 100px;height: 100px;border:1px solid #000;"></div>
    <div style="width: 100px;height: 100px;border:1px solid #000;margin-left: 10px;"></div>
  </div>
</body>
<script>
  /* --- Promise 链式调用 --- */
  // let flag = true
  // const promise = new Promise((resolve, reject) => {
  //   if (flag) {
  //     let result = {
  //       code: 200,
  //       data: 'Resolve',
  //       message: 'success'
  //     }
  //     resolve(result)
  //   } else {
  //     reject(new Error('error'))
  //   }
  // })

  // let Buy = function (parma) {
  //   let data = {
  //     code: 200,
  //     data: { arr: [1, 2, 3] },
  //     message: 'success'
  //   }
  //   let obj = {
  //     code: 200,
  //     message: 'success',
  //     data,
  //     parma,
  //   }
  //   return Promise.resolve(obj)
  // }

  // let test2 = function () {
  //   promise.then(Buy).then(fulfilled => console.log(fulfilled)).catch(rejected => console.log(rejected))
  // }
  // test2()
  const output = document.querySelector('#output')
  const routes = {
    '/'() {
      output.innerText = '默认页面'
    },
    '/page1'() {
      output.innerText = 'page1'
    },
    '/page2'() {
      output.innerText = 'page2'
    },
  }
  // hash 的实现方式
  window.addEventListener('hashchange', function (e) {
    let route = window.location.hash.split('#')[1]
    routes[route]()
  })
  // history 实现方式
  document.querySelector('#main').addEventListener('click', function (e) {
    e.preventDefault();
    let elm = e.target
    let url = elm.href
    let tit = elm.innerText
    window.history.pushState({ path: url, title: tit }, null, url)
    output.innerHTML = `current page is ${tit}`
  })
  window.addEventListener('popstate', function (e) {
    output.innerHTML = `current page is ${e.state.title}`
  })

</script>

</html>